# Makefile for Jarsync.
# $Id$

JAVAC = @JAVAC@
JAVACFLAGS = @JAVACFLAGS@

sources = \
  org/metastatic/rsync/BrokenMD4.java \
  org/metastatic/rsync/Checksum32.java \
  org/metastatic/rsync/ChecksumPair.java \
  org/metastatic/rsync/Configuration.java \
  org/metastatic/rsync/DataBlock.java \
  org/metastatic/rsync/Delta.java \
  org/metastatic/rsync/Generator.java \
  org/metastatic/rsync/JarsyncProvider.java \
  org/metastatic/rsync/MD4.java \
  org/metastatic/rsync/Matcher.java \
  org/metastatic/rsync/Offsets.java \
  org/metastatic/rsync/Rdiff.java \
  org/metastatic/rsync/Rebuilder.java \
  org/metastatic/rsync/RollingChecksum.java \
  org/metastatic/rsync/RsyncConstants.java \
  org/metastatic/rsync/TwoKeyMap.java \
  org/metastatic/rsync/Util.java \
  org/metastatic/rsync/version.java

client_sources = \
  org/metastatic/rsync/v2/ConsoleClient.java \
  org/metastatic/rsync/v2/FileList.java \
  org/metastatic/rsync/v2/Logger.java \
  org/metastatic/rsync/v2/MultiplexedIO.java \
  org/metastatic/rsync/v2/MultiplexedInputStream.java \
  org/metastatic/rsync/v2/MultiplexedOutputStream.java \
  org/metastatic/rsync/v2/Receiver.java \
  org/metastatic/rsync/v2/Rsync.java \
  org/metastatic/rsync/v2/RsyncAppender.java \
  org/metastatic/rsync/v2/Sender.java \
  org/metastatic/rsync/v2/SocketClient.java \
  org/metastatic/rsync/v2/Statistics.java \
  org/metastatic/rsync/v2/UnixFile.java

classes = $(patsubst %.java,../classes/%.class,$(sources))
client_classes = $(patsubst %.java,../classes/%.class,$(client_sources))

all: compile

compile: $(classes)

client: $(client_classes)

$(classes): ../classes/%.class: %.java
	$(JAVAC) $(JAVACFLAGS) $<

$(client_classes): ../classes/%.class: %.java
	$(JAVAC) $(JAVACFLAGS) $<

clean:
	rm -f $(classes) $(client_classes)
